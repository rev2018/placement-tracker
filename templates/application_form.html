{% extends "base.html" %}
{% block content %}

<div class="card">
  {% if mode == "new" %}
    <h1>Add Application</h1>
    <p class="muted">Add a new company you applied to.</p>
  {% else %}
    <h1>Edit Application</h1>
    <p class="muted">Update your status and details.</p>
  {% endif %}

  <form method="POST" action="{{ url_for('new_application') }}" class="form">

    <label>Company Name *</label>
    <input
      type="text"
      name="company_name"
      required
      placeholder="MetConnect Infotech"
      value="{{ app_data.company_name if app_data else '' }}"
    >

    <label>Role *</label>
    <input
      type="text"
      name="role"
      required
      placeholder="Full Stack Developer"
      value="{{ app_data.role if app_data else '' }}"
    >

    <label>Status</label>
    <select name="status">
      {% for s in statuses %}
        <option value="{{ s }}"
          {% if app_data and app_data.status == s %}selected{% endif %}
        >
          {{ s }}
        </option>
      {% endfor %}
    </select>

    <div class="grid">
      <div>
        <label>Applied Date *</label>
        <input
          type="date"
          name="applied_date"
          required
          value="{{ app_data.applied_date if app_data else '' }}"
        >
      </div>

      <div>
        <label>Next Round Date</label>
        <input
          type="date"
          name="next_round_date"
          value="{{ app_data.next_round_date if app_data and app_data.next_round_date else '' }}"
        >
      </div>
    </div>

    <label>Resume Link (Drive/GitHub/Portfolio)</label>
    <input
      type="url"
      name="resume_link"
      placeholder="https://..."
      value="{{ app_data.resume_link if app_data else '' }}"
    >

    <label>Notes</label>
    <textarea
      name="notes"
      rows="4"
      placeholder="Interview questions, feedback, next steps..."
    >{{ app_data.notes if app_data else '' }}</textarea>

    <div class="row">
      <button class="btn" type="submit">
        {% if mode == "new" %}Save Application{% else %}Update Application{% endif %}
      </button>
      <a class="btn ghost" href="{{ url_for('dashboard') }}">Cancel</a>
    </div>
  </form>
</div>

{% endblock %}

